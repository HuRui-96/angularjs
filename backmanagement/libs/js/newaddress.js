function checkadr(){var e={};return e.check=!0,0==$("input[name='name']").val().length?(alert("姓名不能为空！"),e.check=!1,e):/^[\u4e00-\u9fa5]+$/.test($("input[name='name']").val())?0==$("input[name='phone']").val().length?(alert("手机号不能为空！"),e.check=!1,e):/^1\d{10}$/.test($("input[name='phone']").val())?"选择省"==$(".address select").eq(0).val()||"选择省"==$(".address select").eq(1).val()||"选择区/县"==$(".address select").eq(2).val()||0==$(".address input").val().length?(alert("请完善地址信息！"),e.check=!1,e):0==$("input[name='mail']").val().length?(alert("邮政编码不能为空！"),e.check=!1,e):/^\d{6}$/.test($("input[name='mail']").val())?(e.name=$("input[name='name']").val(),e.phone=$("input[name='phone']").val(),e.mail=$("input[name='mail']").val(),e.address=$(".address select").eq(0).val()+$(".address select").eq(1).val()+$(".address select").eq(2).val()+$(".address input").val(),e.able=$("input[type='checkbox']").prop("checked"),e):(alert("邮政编码格式不正确！"),e.check=!1,e):(alert("手机号格式不正确！"),e.check=!1,e):(alert("姓名只能是中文！"),e.check=!1,e)}$(function(){$("header").load("header1.html",function(e,t,a){"success"==t&&($(".header1").find("div").text("地址编辑"),setTimeout(function(){$("header").show()},50))}),$("input").focus(function(){var e=$(this);console.log(e[0].offsetTop),$(".newaddress").scrollTop(e[0].offsetTop-10)});var it=!0;$(document).on("touchstart",function(){it=!0}),$(document).on("touchmove",function(){it=!1}),$(document).on("touchend",function(evt){if(1==it&&$(evt.target).is(".newaddress>ul>li:last-child>div")){var checkadress=checkadr();checkadress.check&&(checkadress.style="add",checkadress.num=(new Date).getTime(),console.log(checkadress),$.post(baseurl+"php/address.php",checkadress,function(rep){console.log(rep),alert(eval("("+rep+")").message),eval("("+rep+")").in?eval("("+rep+")").state&&location.assign("address.html"):location.assign("login.html")}))}});var data1;$("select").change(function(e){if(0==$(e.target).index()){if("选择省"==$(e.target).val())return!1;$("select").not(":first-child").find("option").not(":first-child").remove(),$.get("libs/data/address.txt",function(t){for(var a=JSON.parse(t),n="",s=0;s<a.data.length;s++)if(a.data[s].province==$(e.target).val()){data1=a.data[s].city;for(var c=0;c<a.data[s].city.length;c++)n+="<option>",n+=a.data[s].city[c].name,n+="</option>"}$("select").eq(1).find("option").not(":first-child").remove(),$("select").eq(1).append(n)})}else if(1==$(e.target).index()){console.log(data1);for(var t="",a=0;a<data1.length;a++)if(data1[a].name==$(e.target).val())for(var n=0;n<data1[a].district.length;n++)t+="<option>",t+=data1[a].district[n],t+="</option>";$("select").eq(2).find("option").not(":first-child").remove(),$("select").eq(2).append(t)}})});